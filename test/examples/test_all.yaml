# unikraft.org/caddy:2.7
- arch: x86_64
  args:
    memory: 512M
    disable-acceleration: false
    rootfs: ''
    volume: ''
  http_check:
  - method: GET
    port: 2105
    response_check:
      contains:
      - Hello, World!
      empty: true
      match:
      - '... regex'
    status_code: 200
    uri: /
  - method: options
    port: 2105
    status_code: 200
    uri: /404
  image: unikraft.org/caddy:2.7
  plat: QEMU
  ports:
  - - 2105
    - 2015
  return_code:
    equals: 0
    greater_than: -1
    not_equal_to: 1
  stderr_check:
    contains: []
    empty: true
    match:
    - ''
  stdout_check:
    contains:
    - server running
    - serving initial configuration
    empty: true
    match: ^Powered by Unikraft
- arch: x86_64
  args:
    memory: 512M
    disable-acceleration: false
    rootfs: ''
    volume: ''
  http_check:
  - method: GET
    port: 2105
    response_check:
      contains:
      - Hello, World!
      empty: true
      match:
      - '... regex'
    status_code: 200
    uri: /
  - method: options
    port: 2105
    status_code: 200
    uri: /404
  image: unikraft.org/caddy:2.7
  plat: fc
  ports:
  - - 2105
    - 2015
  return_code:
    equals: 0
    greater_than: -1
    not_equal_to: 1
  stderr_check:
    contains: []
    empty: true
    match:
    - ''
  stdout_check:
    contains:
    - server running
    - serving initial configuration
    empty: true
    match: ^Powered by Unikraft
# unikraft.org/base 
- arch: x86_64
  image: unikraft.org/base
  plat: fc
  return_code:
    equals: 0
  stdout_check:
    contains:
      - Hello from Unikraft 
      - Happy krafting!
  stderr_check:
    empty: true
- arch: x86_64
  image: unikraft.org/base
  plat: qemu
  return_code:
    equals: 0
  stdout_check:
    contains:
      - Hello from Unikraft 
      - Happy krafting!
  stderr_check:
    empty: true
# unikraft.org/helloworld:latest
- arch: x86_64
  plat: qemu
  image: unikraft.org/helloworld:latest
  return_code:
    equals: 0
  stderr_check:
    empty: true
  stdout_check:
    contains:
      - Hello from Unikraft!
- arch: x86_64
  plat: fc
  image: unikraft.org/helloworld:latest
  return_code:
    equals: 0
  stderr_check:
    empty: true
  stdout_check:
    contains:
      - Hello from Unikraft!
# unikraft.org/lua:5.4.4
- arch: x86_64
  plat: qemu
  image: unikraft.org/lua:5.4.4
  args:
    memory: 512M
  ports:
    - [2105, 8080]
  http_check:
  - method: GET
    uri: '/'
    port: 2105
    status_code: 200
    response_check:
      contains:
        - Hello, World!
  return_code:
    equals: 0
  stderr_check:
    empty: true
  stdout_check:
    contains:
      - Powered by Unikraft
      - Now listening on port 8080
      - GET /
- arch: x86_64
  plat: fc
  image: unikraft.org/lua:5.4.4
  timeout: 10
  args:
    memory: 512M
  ports:
    - [2105, 8080]
  http_check:
  - method: GET
    uri: '/'
    port: 2105
    status_code: 200
    response_check:
      contains:
        - Hello, World!
  return_code:
    equals: 0
  stderr_check:
    empty: true
  stdout_check:
    contains:
      - Powered by Unikraft
      - Now listening on port 8080
      - GET /


